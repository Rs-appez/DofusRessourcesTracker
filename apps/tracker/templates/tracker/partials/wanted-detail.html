<div class="wanted-detail-container" id="wanted-detail-container">
    {% if not wanted or not cards %}
        <p>Wanted item not found.</p>
    {% else %}
        <h1>{{ wanted.name }}</h1>
        <div class="wanted-info">
            <div class="wanted-section">
                <div class="wanted-image">
                    <img src="{{ wanted.image.image.url }}" alt="{{ wanted.wanted_name }}" />
                </div>
                <div class="wanted-price-info">
                    <div id="resource-price-{{ wanted.id }}"
                         class="open-value-modal"
                         data-name="{{ wanted.name }}"
                         data-id="{{ wanted.id }}">
                        {% include 'tracker/partials/resource-price.html'  with resource=wanted %}
                    </div>
                    <div>
                        <h2>Last Sell : {{ wanted.last_sell_value }} K</h2>
                        <h3>Average Sell : {{ wanted.average_sell_values | floatformat:2 }} K</h3>
                    </div>
                    <div>
                        <h2>Cards Prices :</h2>
                        <h3>{{ wanted.all_card_price }} K</h3>
                    </div>
                </div>
                <div class="wanted-btn">
                    <div>
                        <button id="buy-all-cards-btn"
                                hx-post="{% url 'tracker:buy_all_cards' wanted.id %}"
                                hx-target="#buy-all-result">Buy all cards</button>
                        <span id="buy-all-result"></span>
                    </div>
                </div>
            </div>
            <div class="cards-section">
                {% for card in cards %}
                    <div class="card open-value-modal"
                         data-name="{{ card.name }}"
                         data-id="{{ card.id }}">
                        <div class="card-image">
                            <img src="{{ card.image.image.url }}" alt="Fragment {{ forloop.counter }}" />
                        </div>
                        <div class="card-info">
                            <h3>{{ card.name }}</h3>
                        </div>
                        <div class="card-price" id="resource-price-{{ card.id }}">
                            {% include 'tracker/partials/resource-price.html' with resource=card %}
                        </div>
                    </div>
                {% empty %}
                    <p>No card available.</p>
                {% endfor %}
            </div>
        </div>
        {% include 'tracker/partials/value-modal.html' %}
    {% endif %}
</div>
